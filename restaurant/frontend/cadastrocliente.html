<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuários</title>
    <script src="jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
    
            // Criar o formulário de cadastro
            var formularioCadastro = $("#formulario-cadastro");
    
            // Adicionar um evento de clique ao botão "Cadastrar"
            formularioCadastro.on("submit", function(e) {
    
                // Prevenir o envio do formulário
                e.preventDefault();
    
                // Obter os dados do formulário
                var nome = $("#nome").val();
                var endereco = $("#endereco").val();
                var email = $("#email").val();
                var dataNascimento = $("#data-nascimento").val();
    
                // Criar um novo objeto JSON com os dados do formulário
                var usuario = {
                    nome: nome,
                    endereco: endereco,
                    email: email,
                    dataNascimento: dataNascimento
                };
    
                // Enviar os dados do formulário para o servidor
                $.ajax({
                    url: "/api/usuarios",
                    method: "POST",
                    data: JSON.stringify(usuario),
                    contentType: "application/json",
                    success: function(usuario) {
                        // Exibir uma mensagem de sucesso
                         alert("Usuário cadastrado com sucesso!");
    
                        // Limpar o formulário
                        formularioCadastro.find("input").val("");
                        },
                    error: function(error) {
                        // Exibir uma mensagem de erro
                        alert("Erro ao cadastrar usuário: " + error);
                    }
                });
    
            });
    
            // Criar o formulário de atualização
            var formularioAtualizacao = $("#formulario-atualizacao");
    
            // Adicionar um evento de clique ao botão "Atualizar"
            formularioAtualizacao.on("submit", function(e) {
    
                // Prevenir o envio do formulário
                e.preventDefault();
    
                // Obter o ID do usuário a ser atualizado
                var id = $("#id").val();
    
                // Obter os dados do formulário
                var nome = $("#nome").val();
                var endereco = $("#endereco").val();
                var email = $("#email").val();
                var dataNascimento = $("#data-nascimento").val();
    
                // Criar um novo objeto JSON com os dados do formulário
                var usuario = {
                    id: id,
                    nome: nome,
                    endereco: endereco,
                    email: email,
                    dataNascimento: dataNascimento
                };
    
                // Enviar os dados do formulário para o servidor
                $.ajax({
                    url: "/api/usuarios/" + id,
                    method: "PUT",
                    data: JSON.stringify(usuario),
                    contentType: "application/json",
                    success: function(usuario) {
                        // Exibir uma mensagem de sucesso
                        alert("Usuário atualizado com sucesso!");
    
                        // Limpar o formulário
                        formularioAtualizacao.find("input").val("");
                    },
                    error: function(error) {
                        // Exibir uma mensagem de erro
                        alert("Erro ao atualizar usuário: " + error);
                    }
                });
    
            });
    
            // Criar o botão de exclusão
            var botaoExclusao = $("#botao-exclusao");
    
            // Adicionar um evento de clique ao botão "Excluir"
            botaoExclusao.on("click", function(e) {
    
                // Prevenir o envio do formulário
                e.preventDefault();
    
                // Obter o ID do usuário a ser excluído
                var id = $("#id").val();
    
                // Enviar uma solicitação de exclusão para o servidor
                $.ajax({
                    url: "/api/usuarios/" + id,
                    method: "DELETE",
                    success: function() {
                        // Exibir uma mensagem de sucesso
                        alert("Usuário excluído com sucesso!");
    
                        // Redirecionar para a página inicial
                        window.location.href = "/";
                    },
                    error: function(error) {
                        // Exibir uma mensagem de erro
                        alert("Erro ao excluir usuário: " + error);
                    }
                });
    
            });
    
        });
        </script>
</head>
<body>
    
    <h1>Cadastro de Usuários</h1>
    
    <form id="formulario-cadastro">
        <label for="nome">Nome:</label>
         <input type="text" id="nome">
        <br>
         <label for="endereco">Endereço:</label>
         <input type="text" id="endereco">
        <br>
        <label for="email">Email:</label>
        <input type="email" id="email">
        <br>
        <label for="data-nascimento">Data de Nascimento:</label>
        <input type="date" id="data-nascimento">
        <br>
        <input type="submit" value="Cadastrar">
    </form>
    
    <form id="formulario-atualizacao">
        <label for="id">ID:</label>
        <input type="number" id="id">
        <br>
        <label for="nome">Nome:</label>
        <input type="text" id="nome">
        <br>
        <label for="endereco">Endereço:</label>
        <input type="text" id="endereco">
        <br>
        <label for="email">Email:</label>
        <input type="email" id="email">
        <br>
        <label for="data-nascimento">Data de Nascimento:</label>
        <input type="date" id="data-nascimento">
        <br>
        <input type="submit" value="Atualizar">
    </form>
    
    <button id="botao-exclusao">Excluir</button>
    
</body>
</html>