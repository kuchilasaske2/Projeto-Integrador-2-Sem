<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Restaurante</title>
    <script src="jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Criar o formulário de cadastro
            var formularioCadastro = $("#formulario-cadastro");

            // Adicionar um evento de clique ao botão "Cadastrar"
            formularioCadastro.on("submit", function(e) {
                // Prevenir o envio do formulário
                e.preventDefault();

                // Obter os dados do formulário
                var nome = $("#nome").val();
                var endereco = $("#endereco").val();
                var telefone = $("#telefone").val();
                var tipoCozinha = $("#tipo-cozinha").val();
                var foto = $("#foto")[0].files[0];

                // Verificar se o campo "Nome" está vazio
                if (nome === "") {
                    alert("O campo 'Nome' é obrigatório.");
                    return;
                }

                // Verificar se o campo "Endereço" está vazio
                if (endereco === "") {
                    alert("O campo 'Endereço' é obrigatório.");
                    return;
                }

                // Verificar se o campo "Telefone" está vazio
                if (telefone === "") {
                    alert("O campo 'Telefone' é obrigatório.");
                    return;
                }

                // Verificar se o campo "Tipo de Cozinha" está vazio
                if (tipoCozinha === "") {
                    alert("O campo 'Tipo de Cozinha' é obrigatório.");
                    return;
                }

                // Verificar se o campo "Foto" está vazio
                if (foto === undefined) {
                    alert("O campo 'Foto' é obrigatório.");
                    return;
                }

                // Criar um novo objeto FormData para enviar os dados do formulário
                var formData = new FormData();
                formData.append("nome", nome);
                formData.append("endereco", endereco);
                formData.append("telefone", telefone);
                formData.append("tipoCozinha", tipoCozinha);
                formData.append("foto", foto);

                // Enviar os dados do formulário para o servidor
                $.ajax({
                    url: "/api/restaurantes",
                    method: "POST",
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function(restaurante) {
                        // Exibir uma mensagem de sucesso
                        alert("Restaurante cadastrado com sucesso!");

                        // Limpar o formulário
                        formularioCadastro.find("input").val("");
                        formularioCadastro.find("input[type=file]").val("");
                    },
                    error: function(error) {
                        // Exibir uma mensagem de erro
                        alert("Erro ao cadastrar restaurante: " + error);
                    }
                });

            });

        });
    </script>
</head>
<body>

    <h1>Cadastro de Restaurante</h1>

    <form id="formulario-cadastro" enctype="multipart/form-data">
        <label for="nome">Nome:</label>
        <input type="text" id="nome">
        <br>
        <label for="endereco">Endereço:</label>
        <input type="text" id="endereco">
        <br>
        <label for="telefone">Telefone:</label>
        <input type="text" id="telefone">
        <br>
        <label for="tipo-cozinha">Tipo de Cozinha:</label>
        <input type="text" id="tipo-cozinha">
        <br>
        <label for="foto">Foto:</label>
        <input type="file" id="foto" accept="image/jpeg">
        <br>
        <input type="submit" value="Cadastrar">
    </form>

</body>
</html>